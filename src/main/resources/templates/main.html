<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link href="/css/main.css" rel="stylesheet">
    <title>Miti Main</title>
</head>
<body>

<div th:replace="layout/header :: header"></div>


<!-- 추천 플레이리스트 섹션 -->
<div class="recommend_title">Recommended Playlist</div>
<div class="recommend">
    <th:block th:each="entry : ${recommendedAlbumsMap}">
        <div class="recommend_playlist">
            <a th:href="@{'/playlist/detail/'   + ${user != null ? user.providerId : ''}+ '/' + ${entry.key}}">
            <img th:src="${entry.value[0].album_image}" alt="Playlist Image" class="playlist_image">
            </a>
            <p class="playlist_name" th:text="${entry.key} + ' 때 듣는 음악'"></p> <!-- 장르에 따른 플레이리스트 이름 -->
        </div>
    </th:block>
</div>
<!-- 기록 기반 추천 플레이리스트 -->
<div class="recommend_title" th:if="${userBasedRecommendations}">
    <p th:text="${user != null ? user.userName : ''} + '님에게 딱 맞는 플레이리스트'"></p>
</div>
<th:block th:each="album : ${userBasedRecommendations}">
    <div class="recommend_playlist">
        <a th:href="@{'/playlist/detail/' + ${user != null ? user.providerId : ''} + '/' + ${album.music_genre}}">
            <img th:src="${album.album_image}" alt="Playlist Image" class="playlist_image">
        </a>
        <p class="playlist_name" th:text="'추천곡: ' + ${album.musicName}"></p> <!-- 기록 기반의 추천 음악 -->
    </div>
</th:block>

<!-- 인기차트 섹션 -->
<div class="chart_title">Popular Chart</div>
<div class="chart">
    <!-- 왼쪽 열 -->

    <div class="chart_column">
        <div class="chart_item" th:each="album, stat : ${albums}" th:onclick="|handleMusicClick(${album.id})|" th:if="${stat.index < 5}">
            <img th:src="${album.album_image}" alt="Album Cover">
            <div class="chart_info">
                <p class="chart_name" th:text="${album.musicName}"></p>
                <p th:text="${album.musicArtistName}"></p>
            </div>
        </div>
    </div>

    <!-- 오른쪽 열 -->
    <div class="chart_column">
        <div class="chart_item" th:each="album, stat : ${albums}" th:onclick="|handleMusicClick(${album.id})|" th:if="${stat.index >= 5 && stat.index < 10}">
            <img th:src="@{${album.album_image}}" alt="Album Cover">
            <div class="chart_info">
                <p class="chart_name" th:text="${album.musicName}"></p>
                <p th:text="${album.musicArtistName}"></p>
            </div>
        </div>
    </div>
</div>




<div th:replace="play/under :: footer"></div>
</body>
</html>